<?xml version="1.0"?>

<!-- Airbus A320 Cockpit -->
<!-- Copyright (c) 2022 Josh Davidson (Octal450) -->

<system name="A320: Cockpit"> <!-- Everything here is after all systems -->
	
	<channel name="Animations">
		
		<lag_filter name="fbw/aileron-sidestick">
			<input>fbw/sidestick/roll-input-cmd</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="fbw/elevator-sidestick">
			<input>fbw/sidestick/pitch-input-cmd</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="fbw/rudder-pedal">
			<input>fbw/sidestick/yaw-input-cmd</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="spoilers/main-lever">
			<input>spoilers/lever-cmd</input>
			<c1>8</c1>
		</lag_filter>
		
		<lag_filter name="spoilers/lever-arm">
			<input>/controls/flight/speedbrake-arm</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/switches/rudder-trim-knob">
			<input>/controls/switches/rudder-trim</input>
			<c1>12</c1>
		</lag_filter>
		
		<lag_filter name="/controls/engines/engine-start-switch-knob">
			<input>/controls/engines/engine-start-switch</input>
			<c1>20</c1>
		</lag_filter>
		
		<fcs_function name="fadec/throttle-lever[0]">
			<function>
				<quotient>
					<property>fadec/control-1/lever/angle</property>
					<value>45</value>
				</quotient>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/throttle-lever[1]">
			<function>
				<quotient>
					<property>fadec/control-2/lever/angle</property>
					<value>45</value>
				</quotient>
			</function>
		</fcs_function>
		
		<lag_filter name="fadec/reverse-lever[0]">
			<input>/controls/engines/engine[0]/reverse-lever</input>
			<c1>16</c1>
		</lag_filter>
		
		<lag_filter name="fadec/reverse-lever[1]">
			<input>/controls/engines/engine[1]/reverse-lever</input>
			<c1>16</c1>
		</lag_filter>
		
		<lag_filter name="fcs/engine-cutoff[0]">
			<input>/controls/engines/engine[0]/cutoff-switch</input>
			<c1>10</c1>
		</lag_filter>
		
		<lag_filter name="fcs/engine-cutoff[1]">
			<input>/controls/engines/engine[1]/cutoff-switch</input>
			<c1>10</c1>
		</lag_filter>
		
		<lag_filter name="fcs/engine-cutoff[1]">
			<input>/controls/engines/engine[1]/cutoff-switch</input>
			<c1>10</c1>
		</lag_filter>
		
		<lag_filter name="/controls/doors/doorc-switch-pos">
			<input>/controls/doors/doorc-switch</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/gear/nws-switch-pos">
			<input>/controls/gear/nws-switch</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/cabin/footwarmer-cpt-pos">
			<input>/controls/cabin/footwarmer-cpt</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/instrumentation/ddrmi/vor-adf-1-pos">
			<input>/instrumentation/ddrmi/vor-adf-1</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/instrumentation/ddrmi/vor-adf-2-pos">
			<input>/instrumentation/ddrmi/vor-adf-2</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/cabin/footwarmer-fo-pos">
			<input>/controls/cabin/footwarmer-fo</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/lighting/console-floor-light-sw-pos">
			<input>/controls/lighting/console-floor-light-sw</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/lighting/console-floor-light-sw-right-pos">
			<input>/controls/lighting/console-floor-light-sw-right</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/gear/gear-down-pos">
			<input>/controls/gear/gear-down</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/instrumentation/clock/utc-selector-pos">
			<input>/instrumentation/clock/utc-selector</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/instrumentation/clock/et-selector-pos">
			<input>/instrumentation/clock/et-selector</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/switches/seatbelt-sign-pos">
			<input>/controls/switches/seatbelt-sign</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="/controls/switches/no-smoking-sign-pos">
			<input>/controls/switches/no-smoking-sign</input>
			<c1>20</c1>
		</lag_filter>
	
	</channel>

	<channel name="Loudspeakers">
		
		<switch name="Loudspeaker">
			<default value="0"/>
			<test logic="OR" value ="/controls/switches/loudspeaker-l">
				<test logic="AND">
					/systems/electrical/bus/dc-ess ge 25
					/controls/switches/loudspeaker-l ge /controls/switches/loudspeaker-r 
				</test>
				<test logic="AND">
					/systems/electrical/bus/dc-1 ge 25
					/controls/navigation/switching/audio eq -1
				</test>
			</test>
			<test logic="AND" value ="/controls/switches/loudspeaker-r">
				<test logic="AND">
					/systems/electrical/bus/dc-ess ge 25
					/controls/switches/loudspeaker-r gt /controls/switches/loudspeaker-r 
				</test>
				<test logic="AND">
					/systems/electrical/bus/dc-1 ge 25
					/controls/navigation/switching/audio eq 1
				</test>
			</test>
			<output>/sim/sound/atc/volume</output>
			<output>/sim/sound/chatter/volume</output>
		</switch>
		
	</channel>
	
</system>
